# Rank Configuratins Based on error delta and decomposition


def get_rank_map(model_name, rate=None):
    
    if rate == 2:
        return {
            'conv1': 40,
            'layer1.0.conv1': 134,
            'layer1.0.conv2': 134,
            'layer1.1.conv1': 134,
            'layer1.1.conv2': 134,
            'layer2.0.conv1': 183,
            'layer2.0.conv2': 278,
            'layer2.0.downsample.0': 21,
            'layer2.1.conv1': 278,
            'layer2.1.conv2': 278,
            'layer3.0.conv1': 375,
            'layer3.0.conv2': 566,
            'layer3.0.downsample.0': 42,
            'layer3.1.conv1': 566,
            'layer3.1.conv2': 566,
            'layer4.0.conv1': 759,
            'layer4.0.conv2': 1141,
            'layer4.0.downsample.0': 85,
            'layer4.1.conv1': 1141,
            'layer4.1.conv2': 1141,
            'trunk_output.block1.block1-0.proj.0': 11,
        }
    
    if rate == 1.5 and model_name == 'resnet18':
        return {
            'conv1': 54,
            'layer1.0.conv1': 179,
            'layer1.0.conv2': 179,
            'layer1.1.conv1': 179,
            'layer1.1.conv2': 179,
            'layer2.0.conv1': 244,
            'layer2.0.conv2': 370,
            'layer2.0.downsample.0': 28,
#             'layer2.0.downsample.0': 42,
            'layer2.1.conv1': 370,
            'layer2.1.conv2': 370,
            'layer3.0.conv1': 500,
            'layer3.0.conv2': 754,
            'layer3.0.downsample.0': 56,
#             'layer3.0.downsample.0': 85,
            'layer3.1.conv1': 754,
            'layer3.1.conv2': 754,
            'layer4.0.conv1': 1012,
            'layer4.0.conv2': 1522,
#             'layer4.0.downsample.0': 170,
            'layer4.0.downsample.0': 113,
            'layer4.1.conv1': 1522,
            'layer4.1.conv2': 1522
        }
    
    if rate == 1.5 and model_name == 'regnet_y_3_2gf':
        return {
            'trunk_output.block1.block1-0.proj.0': 14,
            'trunk_output.block1.block1-0.f.a.0': 14,
            'trunk_output.block1.block1-0.f.b.0': 99,
            'trunk_output.block1.block1-0.f.se.fc1': 4,
            'trunk_output.block1.block1-0.f.se.fc2': 4,
            'trunk_output.block1.block1-0.f.c.0': 24,
            'trunk_output.block1.block1-1.f.a.0': 24,
            'trunk_output.block1.block1-1.f.b.0': 99,
            'trunk_output.block1.block1-1.f.se.fc1': 9,
            'trunk_output.block1.block1-1.f.se.fc2': 9,
            'trunk_output.block1.block1-1.f.c.0': 24,
            'trunk_output.block2.block2-0.proj.0': 36,
            'trunk_output.block2.block2-0.f.a.0': 36,
            'trunk_output.block2.block2-0.f.b.0': 126,
            'trunk_output.block2.block2-0.f.se.fc1': 11,
            'trunk_output.block2.block2-0.f.se.fc2': 11,
            'trunk_output.block2.block2-0.f.c.0': 72,
            'trunk_output.block2.block2-1.f.a.0': 72,
            'trunk_output.block2.block2-1.f.b.0': 126,
            'trunk_output.block2.block2-1.f.se.fc1': 28,
            'trunk_output.block2.block2-1.f.se.fc2': 28,
            'trunk_output.block2.block2-1.f.c.0': 72,
            'trunk_output.block2.block2-2.f.a.0': 72,
            'trunk_output.block2.block2-2.f.b.0': 126,
            'trunk_output.block2.block2-2.f.se.fc1': 28,
            'trunk_output.block2.block2-2.f.se.fc2': 28,
            'trunk_output.block2.block2-2.f.c.0': 72,
            'trunk_output.block2.block2-3.f.a.0': 72,
            'trunk_output.block2.block2-3.f.b.0': 126,
            'trunk_output.block2.block2-3.f.se.fc1': 28,
            'trunk_output.block2.block2-3.f.se.fc2': 28,
            'trunk_output.block2.block2-3.f.c.0': 72,
            'trunk_output.block2.block2-4.f.a.0': 72,
            'trunk_output.block2.block2-4.f.b.0': 126,
            'trunk_output.block2.block2-4.f.se.fc1': 28,
            'trunk_output.block2.block2-4.f.se.fc2': 28,
            'trunk_output.block2.block2-4.f.c.0': 72,
            'trunk_output.block3.block3-0.proj.0': 104,
            'trunk_output.block3.block3-0.f.a.0': 104,
            'trunk_output.block3.block3-0.f.b.0': 144,
            'trunk_output.block3.block3-0.f.se.fc1': 32,
            'trunk_output.block3.block3-0.f.se.fc2': 32,
            'trunk_output.block3.block3-0.f.c.0': 192,
            'trunk_output.block3.block3-1.f.a.0': 192,
            'trunk_output.block3.block3-1.f.b.0': 144,
            'trunk_output.block3.block3-1.f.se.fc1': 76,
            'trunk_output.block3.block3-1.f.se.fc2': 76,
            'trunk_output.block3.block3-1.f.c.0': 192,
            'trunk_output.block3.block3-2.f.a.0': 192,
            'trunk_output.block3.block3-2.f.b.0': 144,
            'trunk_output.block3.block3-2.f.se.fc1': 76,
            'trunk_output.block3.block3-2.f.se.fc2': 76,
            'trunk_output.block3.block3-2.f.c.0': 192,
            'trunk_output.block3.block3-3.f.a.0': 192,
            'trunk_output.block3.block3-3.f.b.0': 144,
            'trunk_output.block3.block3-3.f.se.fc1': 76,
            'trunk_output.block3.block3-3.f.se.fc2': 76,
            'trunk_output.block3.block3-3.f.c.0': 192,
            'trunk_output.block3.block3-4.f.a.0': 192,
            'trunk_output.block3.block3-4.f.b.0': 144,
            'trunk_output.block3.block3-4.f.se.fc1': 76,
            'trunk_output.block3.block3-4.f.se.fc2': 76,
            'trunk_output.block3.block3-4.f.c.0': 192,
            'trunk_output.block3.block3-5.f.a.0': 192,
            'trunk_output.block3.block3-5.f.b.0': 144,
            'trunk_output.block3.block3-5.f.se.fc1': 76,
            'trunk_output.block3.block3-5.f.se.fc2': 76,
            'trunk_output.block3.block3-5.f.c.0': 192,
            'trunk_output.block3.block3-6.f.a.0': 192,
            'trunk_output.block3.block3-6.f.b.0': 144,
            'trunk_output.block3.block3-6.f.se.fc1': 76,
            'trunk_output.block3.block3-6.f.se.fc2': 76,
            'trunk_output.block3.block3-6.f.c.0': 192,
            'trunk_output.block3.block3-7.f.a.0': 192,
            'trunk_output.block3.block3-7.f.b.0': 144,
            'trunk_output.block3.block3-7.f.se.fc1': 76,
            'trunk_output.block3.block3-7.f.se.fc2': 76,
            'trunk_output.block3.block3-7.f.c.0': 192,
            'trunk_output.block3.block3-8.f.a.0': 192,
            'trunk_output.block3.block3-8.f.b.0': 144,
            'trunk_output.block3.block3-8.f.se.fc1': 76,
            'trunk_output.block3.block3-8.f.se.fc2': 76,
            'trunk_output.block3.block3-8.f.c.0': 192,
            'trunk_output.block3.block3-9.f.a.0': 192,
            'trunk_output.block3.block3-9.f.b.0': 144,
            'trunk_output.block3.block3-9.f.se.fc1': 76,
            'trunk_output.block3.block3-9.f.se.fc2': 76,
            'trunk_output.block3.block3-9.f.c.0': 192,
            'trunk_output.block3.block3-10.f.a.0': 192,
            'trunk_output.block3.block3-10.f.b.0': 144,
            'trunk_output.block3.block3-10.f.se.fc1': 76,
            'trunk_output.block3.block3-10.f.se.fc2': 76,
            'trunk_output.block3.block3-10.f.c.0': 192,
            'trunk_output.block3.block3-11.f.a.0': 192,
            'trunk_output.block3.block3-11.f.b.0': 144,
            'trunk_output.block3.block3-11.f.se.fc1': 76,
            'trunk_output.block3.block3-11.f.se.fc2': 76,
            'trunk_output.block3.block3-11.f.c.0': 192,
            'trunk_output.block3.block3-12.f.a.0': 192,
            'trunk_output.block3.block3-12.f.b.0': 144,
            'trunk_output.block3.block3-12.f.se.fc1': 76,
            'trunk_output.block3.block3-12.f.se.fc2': 76,
            'trunk_output.block3.block3-12.f.c.0': 192,
            'trunk_output.block4.block4-0.proj.0': 278,
            'trunk_output.block4.block4-0.f.a.0': 278,
            'trunk_output.block4.block4-0.f.b.0': 189,
            'trunk_output.block4.block4-0.f.se.fc1': 87,
            'trunk_output.block4.block4-0.f.se.fc2': 87,
            'trunk_output.block4.block4-0.f.c.0': 504
        }
    
    if rate == 2.5:
        return {
            'conv1': 32,
            'layer1.0.conv1': 107,
            'layer1.0.conv2': 107,
            'layer1.1.conv1': 107,
            'layer1.1.conv2': 107,
            'layer2.0.conv1': 146,
            'layer2.0.conv2': 222,
            'layer2.0.downsample.0': 17,
            'layer2.1.conv1': 222,
            'layer2.1.conv2': 222,
            'layer3.0.conv1': 300,
            'layer3.0.conv2': 452,
            'layer3.0.downsample.0': 34,
            'layer3.1.conv1': 452,
            'layer3.1.conv2': 452,
            'layer4.0.conv1': 607,
            'layer4.0.conv2': 913,
            'layer4.0.downsample.0': 68,
            'layer4.1.conv1': 913,
            'layer4.1.conv2': 913
        }
    
    if rate == 2.7:
        return {
            'conv1': 30,
            'layer1.0.conv1': 99,
            'layer1.0.conv2': 99,
            'layer1.1.conv1': 99,
            'layer1.1.conv2': 99,
            'layer2.0.conv1': 135,
            'layer2.0.conv2': 206,
            'layer2.0.downsample.0': 15,
            'layer2.1.conv1': 206,
            'layer2.1.conv2': 206,
            'layer3.0.conv1': 277,
            'layer3.0.conv2': 419,
            'layer3.0.downsample.0': 31,
            'layer3.1.conv1': 419,
            'layer3.1.conv2': 419,
            'layer4.0.conv1': 562,
            'layer4.0.conv2': 845,
            'layer4.0.downsample.0': 63,
            'layer4.1.conv1': 845,
            'layer4.1.conv2': 845
        }
    
    if rate == 3.0:
        return {
            'conv1': 27,
            'layer1.0.conv1': 89,
            'layer1.0.conv2': 89,
            'layer1.1.conv1': 89,
            'layer1.1.conv2': 89,
            'layer2.0.conv1': 122,
            'layer2.0.conv2': 185,
            'layer2.0.downsample': 14,
            'layer2.1.conv1': 185,
            'layer2.1.conv2': 185,
            'layer3.0.conv1': 250,
            'layer3.0.conv2': 377,
            'layer3.0.downsample': 28,
            'layer3.1.conv1': 377,
            'layer3.1.conv2': 377,
            'layer4.0.conv1': 506,
            'layer4.0.conv2': 761,
            'layer4.0.downsample': 56,
            'layer4.1.conv1': 761,
            'layer4.1.conv2': 761
        }
    
    if rate == 4.0:
        return {
            'layer1.0.conv1': 67,
            'layer1.0.conv2': 67,
            'layer1.1.conv1': 67,
            'layer1.1.conv2': 67,
            'layer2.0.conv1': 91,
            'layer2.0.conv2': 139,
            'layer2.1.conv1': 139,
            'layer2.1.conv2': 139,
            'layer3.0.conv1': 187,
            'layer3.0.conv2': 283,
            'layer3.1.conv1': 283,
            'layer3.1.conv2': 283,
            'layer4.0.conv1': 379,
            'layer4.0.conv2': 570,
            'layer4.1.conv1': 570,
            'layer4.1.conv2': 570
        }
    
    if rate == 1.2:
        return {
            'layer1.0.conv1': 224,
            'layer1.0.conv2': 224,
            'layer1.1.conv1': 224,
            'layer1.1.conv2': 224,
            'layer2.0.conv1': 305,
            'layer2.0.conv2': 463,
            'layer2.1.conv1': 463,
            'layer2.1.conv2': 463,
            'layer3.0.conv1': 625,
            'layer3.0.conv2': 943,
            'layer3.1.conv1': 943,
            'layer3.1.conv2': 943,
            'layer4.0.conv1': 1265,
            'layer4.0.conv2': 1903,
            'layer4.1.conv1': 1903,
            'layer4.1.conv2': 1903
        }

